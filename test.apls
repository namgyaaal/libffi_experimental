#!/usr/local/bin/dyalogscript
⎕SE.(⍎⊃2⎕FIX'/StartupSession.aplf',⍨2⎕NQ # 'GetEnvironment' 'DYALOG')
⎕SE.Link.Create 'ffiw' './ffiw'
⎕IO ← 0

inner ← ffiw.Build_Struct ['a' ffiw.types.u32 ⋄ 'b' ffiw.types.u32]

⎕FX ffiw.Build_Function 'fn_a' ['a' ffiw.types.u32⋄] ffiw.types.u32
⎕FX ffiw.Build_Function 'fn_add' ['a' ffiw.types.u32 ⋄ 'b' ffiw.types.u32] ffiw.types.u32
⎕FX ffiw.Build_Function 'fn_struct' ['s' inner⋄] ffiw.types.u32

⎕ ← 'fn_a:', fn_a (a: 10)
⎕ ← 'fn_add:', fn_add(a:5 ⋄ b: 10)
⎕ ← 'fn_struct', fn_struct(s: (a: 1 ⋄ b: 2))
